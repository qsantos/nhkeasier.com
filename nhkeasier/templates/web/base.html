<!DOCTYPE html>
<html lang=en>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="flattr:id" content="w150z0">
<title>{{ title }} | NHK Easier</title>
<meta property="og:site_name" content="NHK Easier" />
<meta property="og:title" content="{{ title }}" />
<meta property="og:type" content="article" />
{%- if let Some(description) = description %}
    <meta name="description" content="{{ description }}">
    <meta property="og:description" content="{{ description }}" />
{%- endif %}
{%- if let Some(image) = image %}
    <meta property="og:image" content="/media/{{ image|safe }}" />
    <meta property="og:image:width" content="640" />
    <meta property="og:image:height" content="360" />
    <meta name="twitter:card" content="summary_large_image" />
{%- endif %}
<link rel="icon" href="/static/favicon.png">
<link rel="stylesheet" href="/static/bootstrap-5.3.3.min.css">
<link rel="stylesheet" href="/static/style.css?2025-12-08">
<link rel="alternate" href="/feed/" title="NHK Easier Stories" type="application/rss+xml">
<script async src="/static/bootstrap-5.3.3.min.js"></script>
</head>
<body>

<script>
// handle dark mode before rendering content or fetching resources to avoid flashing when loading page
function isDarkModeOn() {
    const mode = localStorage.getItem('darkmode');
    if (mode === 'on') {
        return true;
    } else if (mode === 'off') {
        return false;
    } else {
        return window.matchMedia?.('(prefers-color-scheme: dark)')?.matches;
    }
}
document.documentElement.setAttribute('data-bs-theme', isDarkModeOn() ? 'dark' : 'light');
</script>

<header class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <h1 class="nvarbar-brand"><a href="/">NHK <ruby>Easier<rt>イーシア</rt></ruby></a></h1>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#header-collapse" aria-controls="header-collapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="header-collapse">
            <div class="toggle" id="ruby-toggle">
                <ul>
                    <li>
                        <label>
                            <input type="radio" name="ruby-toggle" value="always">
                            <img src="/static/always.svg" alt="Always show furigana" title="Always show furigana">
                        </label>
                    </li>
                    <li>
                        <label>
                            <input type="radio" name="ruby-toggle" value="hover" checked>
                            <img src="/static/hover.svg" alt="Show furigana on hover" title="Show on hover furigana">
                        </label>
                    </li>
                    <li>
                        <label>
                            <input type="radio" name="ruby-toggle" value="never">
                            <img src="/static/never.svg" alt="Never show furigana" title="Never show furigana">
                        </label>
                    </li>
                </ul>
                <div class="toggle-helper" id="ruby-toggle-helper">
                    Press <kbd>F</kbd> to toggle furigana
                </div>
            </div>
            <div class="toggle" id="dict-toggle">
                <ul>
                    <li>
                        <label>
                            <input type="checkbox" name="dict-toggle" checked>
                            <img src="/static/dict.png" alt="Toggle the dictionary" title="Toggle the dictionary">
                        </label>
                    </li>
                </ul>
                <div class="toggle-helper" id="dict-toggle-helper">
                    Press <kbd>D</kbd> to toggle dictionary
                </div>
            </div>
            <div class="toggle" id="darkmode-toggle">
                <ul>
                    <li>
                        <label>
                            <input type="checkbox" name="darkmode-toggle" value="never">
                            <img src="/static/darkmode.svg" alt="Toggle dark mode" title="Toggle dark mode">
                        </label>
                    </li>
                </ul>
                <div class="toggle-helper" id="darkmode-toggle-helper">
                    Press <kbd>S</kbd> to toggle dark mode
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="/epub/">EPUB</a></li>
                    <li><a href="/story/1/">First</a></li>
                    <li><a href="/random/"><span style="text-decoration: underline">R</span>andom</a></li>
                    <li><a href="/contact/">Contact</a></li>
                    <li><a href="/about/">About</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<main>
<h2>{{ heading }}</h2>
{%- block content %}
Something went terribly wrong, I guess.
{%- endblock %}
</main>
<script>
document.addEventListener('keydown', function(event) {
    const targetTagName = event.target.tagName;
    if (targetTagName == 'INPUT' || targetTagName == 'TEXTAREA') {
        return;
    }
    if (event.key === 'r' && !(event.altKey || event.ctrlKey || event.metaKey || event.shiftKey)) {
        document.location = '/random/';
    }
});
</script>
{%- if !DEBUG %}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7JRMQY3TCL"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-7JRMQY3TCL');
</script>
{%- endif %}
</body>
</html>
