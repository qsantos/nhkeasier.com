* { box-sizing:border-box; }
body { margin:0; font:14px sans-serif;}
h1 {
    margin:0; width:100%;
    background-color:#0d182b;
    font:28px sans-serif;
}
h1 a {
    color:white; text-decoration:none; outline:none;
    /* margin atop <a> (not padding in <h1>) for cross-browser consistency */
    display:inline-block; margin:10px 0 10px; padding:0 14px 18px;
}
main {
    max-width:660px; margin:0 auto; padding:0 10px;
}
/* navigation bars */
nav { font-size:x-large; }
nav>table { table-layout:fixed; margin:0 auto; }
nav td { text-align:center; padding:5px; }
nav td:nth-child(3) { min-width:4em; }

/* stories */
article h3 { font:28px sans-serif; margin:0; }
article h4 { font-size:large; margin:0 0 10px; }
article h4 a { text-decoration:none; color:black; font-family:mono; }
article .permalink { float:right; font-variant:uppercase; }
article h4 a:hover * { text-decoration:underline; }
article {
    margin-bottom:100px;
    font-size:20px;
    overflow-wrap:break-word;
    /* From Jisho */
    font-family: "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif;
}
article img { display:block; margin:0 auto !important; max-width:100%; }
article audio { width:100%; }
article video { max-width:100%; }
article>p { cursor:default; margin-bottom:40px; }

/* rubies */
ruby>rt { visibility:hidden; }
ruby:hover>rt { visibility:inherit; }
.ruby_never ruby:hover>rt { visibility:hidden; }
.ruby_always ruby>rt { visibility:inherit; }
.ruby-toggles {
    list-style-type:none; margin-top:10px; padding:0;
    display:flex; flex-direction:row; justify-content:space-around;
}
.ruby-toggles input { display:none; }
.ruby-toggles img { height:60px; width:60px; padding:5px; }
.ruby-toggles :checked + img { padding:4px; border:1px solid black; border-radius:3px; }

/* asides */
#tools p { font-size:medium; }
@media (max-width:1279px) {
    #tools { max-width:640px; margin:0 auto; }
}
@media (max-width:1279px), (max-height:499px) {
    #rikai { display:none; }  /* overrided by Javascript */
    #rikai dl {
        position:fixed; top:10px; left:0; right:0; margin:0 auto;
        width:420px; padding:10px;
        max-width:calc(100% - 40px); max-height:calc(100% - 70px); overflow: auto;
        border:1px solid lightgrey;
        background-color: white;
        z-index:10;
    }
    #mask {
        position:fixed; top:0; left:0; width:100%; height:100%;
        background-color:rgba(0,0,0,.5);
        z-index:5;
    }
}
@media (min-width:1280px) {
    #tools {
        position:sticky; top:0px; float:left; width:310px; height:100vh;
        background-color:#f7f9fd; border-right:10px solid #0d182b;
        padding:20px; overflow:auto;
    }
}
